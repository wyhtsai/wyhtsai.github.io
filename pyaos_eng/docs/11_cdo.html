
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>11. Climate Data Operator (CDO) &#8212; Python for Atmosphere and Ocean Science (PyAOS)</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=87e54e7c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-HKB5C6NRJC"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-HKB5C6NRJC');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-HKB5C6NRJC');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '11_cdo';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="12. dask and Large Datasets Computations" href="12_large_ds.html" />
    <link rel="prev" title="10. pandas and seaborn: Statistical Plots" href="10_pandas_seaborn.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="00_syllabus_eng.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/PyAOS_gray_logo.png" class="logo__image only-light" alt="Python for Atmosphere and Ocean Science (PyAOS) - Home"/>
    <script>document.write(`<img src="_static/PyAOS_gray_logo.png" class="logo__image only-dark" alt="Python for Atmosphere and Ocean Science (PyAOS) - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="00_syllabus_eng.html">
                    Syllabus
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Fundamentals in xarray</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="00_setup.html">Python Installation and Environment Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="01_intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_open_nc_files.html">2. NetCDF and GRIB Datasets I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_plotting_basics.html">3. Basic Workflow Demo: Plotting A Monthly Mean Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_xr_datetime.html">4. Conditional Control of <code class="docutils literal notranslate"><span class="pre">datetime</span></code> Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_da_create.html">5. Manually Create a DataArray</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Fundamentals in climate analysis</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="06_clim_anml.html">6. Climatology and Anomaly</a></li>
<li class="toctree-l1"><a class="reference internal" href="07_statistics_calc.html">7. Advanced Calculation and Statistical Methods</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Advanced plotting</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="08_plotting_1d.html">8. <code class="docutils literal notranslate"><span class="pre">xarray</span></code> Plotting (I): Plotting 1-Dimensional Data</a></li>

<li class="toctree-l1"><a class="reference internal" href="09_plotting_2d.html">9. <code class="docutils literal notranslate"><span class="pre">xarray</span></code> Plotting (II): Plotting Data with More Than 2 Dimensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_pandas_seaborn.html">10. <code class="docutils literal notranslate"><span class="pre">pandas</span></code> and <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>: Statistical Plots</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Other topics</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">11. Climate Data Operator (CDO)</a></li>
<li class="toctree-l1"><a class="reference internal" href="12_large_ds.html">12. <code class="docutils literal notranslate"><span class="pre">dask</span></code> and Large Datasets Computations</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="appendix-main.html">附錄：實用氣候分析程式範例</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="A4_ireg_grid_sel.html">Slicing Iregular Grids</a></li>
<li class="toctree-l2"><a class="reference internal" href="A3_lanczos_filter.html">Lanczos Filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="A1_mjo_phase.html">Climate Variability Analysis: Madden–Julian Oscillation (MJO)</a></li>
<li class="toctree-l2"><a class="reference internal" href="A6_tropical_waves.html">Tropical Waves Identification and Analysis</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/wyhtsai/wyhtsai.github.io/tree/main/pyaos_eng/docs" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/wyhtsai/wyhtsai.github.io/tree/main/pyaos_eng/docs/issues/new?title=Issue%20on%20page%20%2F11_cdo.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/11_cdo.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>11. Climate Data Operator (CDO)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cdo"><code class="docutils literal notranslate"><span class="pre">cdo</span></code>基本指令</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#linux-command-line">Linux指令列 (Command Line)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python">Python程式</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#select-field">資料選擇 (Select Field)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#statistics">統計 (Statistics)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#arithmetics">算術 (Arithmetics)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interpolation">網格內插 (Interpolation)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">內插到標準網格</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">內插到任意網格</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">檔案輸出格式</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#binary">Binary二元進位檔</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="climate-data-operator-cdo">
<h1>11. Climate Data Operator (CDO)<a class="headerlink" href="#climate-data-operator-cdo" title="Link to this heading">#</a></h1>
<p>CDO是由德國Max-Plank Institute for Meteorology研發出的軟體，它擁有許多可以處理標準氣候資料和預報模式資料的指令 (Operator)，包括簡易的統計、算數、資料選擇、時間和空間網格處理、內插等，是一套方便又強大的工具。以往必須在命令列 (Command Line) 使用cdo，現在MPI把這套套件寫成Python的套件，因此也可以在Python程式中使用。</p>
<p>在這套講義中，我們主要會學習</p>
<ul class="simple">
<li><p>選擇資料中特定時間、空間、垂直層資料，或是特定的變數。</p></li>
<li><p>計算簡易統計量。</p></li>
<li><p>資料算術。</p></li>
<li><p>資料網格內插。</p></li>
<li><p>轉換資料格式。</p></li>
</ul>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>cdo計算後的產品都是輸出.nc檔，不像在前面的單元中所學會輸出成一個矩陣在Python內部使用。因此計算完後，如果在程式中需要使用這筆資料，必須再用<code class="docutils literal notranslate"><span class="pre">xarray.open_dataset</span></code>讀進程式。</p>
</div>
<section id="cdo">
<h2><code class="docutils literal notranslate"><span class="pre">cdo</span></code>基本指令<a class="headerlink" href="#cdo" title="Link to this heading">#</a></h2>
<section id="linux-command-line">
<h3>Linux指令列 (Command Line)<a class="headerlink" href="#linux-command-line" title="Link to this heading">#</a></h3>
<p>在Linux的指令列操作cdo的方式如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span> <span class="p">[</span><span class="n">Options</span><span class="p">]</span> <span class="n">Operator1</span> <span class="p">[</span><span class="o">-</span><span class="n">Operator2</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">OperatorN</span><span class="p">]</span> <span class="n">infile</span> <span class="n">outfile</span>
</pre></div>
</div>
<p>也就是針對檔案<code class="docutils literal notranslate"><span class="pre">infile</span></code>操作指令<code class="docutils literal notranslate"><span class="pre">OperatorN</span></code>後，會得到計算好的結果<code class="docutils literal notranslate"><span class="pre">outfile</span></code>。<br />
若想要在一個命令列中執行N個指令，可以利用<code class="docutils literal notranslate"><span class="pre">[-OperatorN]</span></code>的方式 接起來；而cdo執行的順序為<code class="docutils literal notranslate"><span class="pre">[-OperatorN]</span></code> →<code class="docutils literal notranslate"><span class="pre">[-Operator2]</span></code>→<code class="docutils literal notranslate"><span class="pre">Operator1</span></code>.</p>
</section>
<section id="python">
<h3>Python程式<a class="headerlink" href="#python" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cdo</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">cdo</span> <span class="o">=</span> <span class="n">Cdo</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>在Linux指令列中所用的Operator，在Python中就是cdo的方法函數。</p>
</section>
</section>
<section id="select-field">
<h2>資料選擇 (Select Field)<a class="headerlink" href="#select-field" title="Link to this heading">#</a></h2>
<p>cdo有完整的指令說明書，可從<a class="reference external" href="https://code.mpimet.mpg.de/projects/cdo/embedded/cdo.pdf">官網</a>上下載。我們從最簡單的資料選擇開始示範起，在看範例之前，可以先試著透過搜尋說明書自己做做看，例如資料選擇的方法記載在說明書的2.3節。</p>
<p><strong>Example 1:</strong> 如何選取1998-2018年每年12月的OLR資料?</p>
<p>選取資料範圍使用<code class="docutils literal notranslate"><span class="pre">select</span></code>的方法函數。</p>
<p><strong>1. Command Line:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span> <span class="n">select</span><span class="p">,</span><span class="n">year</span><span class="o">=</span><span class="mi">1998</span><span class="o">/</span><span class="mi">2018</span><span class="p">,</span><span class="n">month</span><span class="o">=</span><span class="mi">12</span> <span class="n">data</span><span class="o">/</span><span class="n">olr</span><span class="o">.</span><span class="n">nc</span> <span class="n">data</span><span class="o">/</span><span class="n">olr_1998</span><span class="o">-</span><span class="mf">2018.12</span><span class="o">.</span><span class="n">nc</span>
</pre></div>
</div>
<p><strong>2. Python:</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;year=1998/2018,month=12&#39;</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;data/olr.nc&#39;</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s1">&#39;data/olr_1998-2018.12.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;data/olr_1998-2018.12.nc&#39;
</pre></div>
</div>
</div>
</div>
<p>或是</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span><span class="o">.</span><span class="n">selyear</span><span class="p">(</span><span class="s1">&#39;1998/2018&#39;</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="n">cdo</span><span class="o">.</span><span class="n">selmon</span><span class="p">(</span><span class="s1">&#39;12&#39;</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;data/olr.nc&#39;</span><span class="p">),</span> 
                         <span class="n">output</span><span class="o">=</span><span class="s1">&#39;data/olr_1998-2018.12.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;data/olr_1998-2018.12.nc&#39;
</pre></div>
</div>
</div>
</div>
<p><strong>Example 2 Select Field and Operator Chaining:</strong> 先以cdo合併NCEP R2 u850風場檔案時間，再選出NDJ的資料。</p>
<p><strong>1. Command Line:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span> <span class="n">select</span><span class="p">,</span><span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">12</span> <span class="o">-</span><span class="n">mergetime</span> <span class="n">data</span><span class="o">/</span><span class="n">ncep_r2_uv850</span><span class="o">/</span><span class="n">u850</span><span class="o">.*.</span><span class="n">nc</span> <span class="n">data</span><span class="o">/</span><span class="n">ncep_r2_u850_ndj</span><span class="o">.</span><span class="n">nc</span>
</pre></div>
</div>
<p><strong>2 Python:</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;month=1,11,12&#39;</span><span class="p">,</span> 
           <span class="nb">input</span><span class="o">=</span><span class="n">cdo</span><span class="o">.</span><span class="n">mergetime</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="s1">&#39;data/ncep_r2_uv850/u850.*.nc&#39;</span><span class="p">),</span>
           <span class="n">output</span><span class="o">=</span><span class="s1">&#39;data/ncep_r2_u850_ndj.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;data/ncep_r2_u850_ndj.nc&#39;
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mergetime</span></code>: Merges all timesteps of all input files sorted by date and time. All input files need to have the same structure with the same variables on different timesteps. After this operation every input timestep is in outfile and all timesteps are sorted by date and time.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cat</span></code>: Concatenates all input datasets and appends the result to the end of outfile.</p></li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>如果資料太大時 (e.g. 解析度太高導致資料太大……)，先做<code class="docutils literal notranslate"><span class="pre">mergetime</span></code>再選擇時間，可能會導致合併後的副產品太大而記憶體無法負荷。因此，也可以寫一個程式帶有<code class="docutils literal notranslate"><span class="pre">for</span></code>迴圈，先每一年選擇月份並輸出資料，最後再把這些中間產品全部合併起來。</p>
</div>
<p><strong>Example 3 選擇特定區域的資料：</strong> 使用<code class="docutils literal notranslate"><span class="pre">sellonlatbox</span></code>選擇40˚-180˚E、20˚S-30˚N區域的資料。</p>
<p><strong>1. Command Line:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span> <span class="n">sellonlatbox</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mi">180</span><span class="p">,</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span> <span class="n">data</span><span class="o">/</span><span class="n">olr</span><span class="o">.</span><span class="n">nc</span> <span class="n">olr_selbox</span><span class="o">.</span><span class="n">nc</span>
</pre></div>
</div>
<p><strong>2. Python:</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span><span class="o">.</span><span class="n">sellonlatbox</span><span class="p">(</span><span class="s1">&#39;40,180,-20,30&#39;</span><span class="p">,</span>
                 <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;data/olr.nc&#39;</span><span class="p">,</span>
                 <span class="n">output</span><span class="o">=</span><span class="s1">&#39;data/olr_selbox.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;data/olr_selbox.nc&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="statistics">
<h2>統計 (Statistics)<a class="headerlink" href="#statistics" title="Link to this heading">#</a></h2>
<p>統計方法在說明書的第2.8節，例如<code class="docutils literal notranslate"><span class="pre">sum</span></code>, <code class="docutils literal notranslate"><span class="pre">mean</span></code>, <code class="docutils literal notranslate"><span class="pre">avg</span></code>, <code class="docutils literal notranslate"><span class="pre">var</span></code>, <code class="docutils literal notranslate"><span class="pre">std</span></code>, <code class="docutils literal notranslate"><span class="pre">weighted</span> <span class="pre">avg</span></code> and var…，請自行參閱其定義及用法。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>What’s different between <code class="docutils literal notranslate"><span class="pre">mean</span></code> and <code class="docutils literal notranslate"><span class="pre">avg</span></code>? To distinguish two different kinds of treatment of missing values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mean</span></code>: only the not missing values are considered to belong to the sample with the side effect of a probably reduced sample size.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">avg</span></code>: just adding the sample members and divide the result by the sample size.</p></li>
<li><p>E.g.: the mean of 1, 2, miss and 3 is (1+2+3)/3 = 2, whereas the average is (1+2+miss+3)/4 = miss/4 = miss. If there are no missing values in the sample, the average and the mean are identical.</p></li>
</ul>
</div>
<p><strong>Example 4:</strong> 利用CDO計算1998-2018年OLR降水資料十二月的長期平均。</p>
<p><strong>1. Command Line:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span> <span class="n">timmean</span> <span class="o">-</span><span class="n">select</span><span class="p">,</span><span class="n">year</span><span class="o">=</span><span class="mi">1998</span><span class="o">/</span><span class="mi">2018</span><span class="p">,</span><span class="n">month</span><span class="o">=</span><span class="mi">12</span> <span class="n">data</span><span class="o">/</span><span class="n">olr</span><span class="o">.</span><span class="n">nc</span> <span class="n">olr_dec_ltm</span><span class="o">.</span><span class="n">nc</span> 
</pre></div>
</div>
<p><strong>2. Python:</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span><span class="o">.</span><span class="n">timmean</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="n">cdo</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;year=1998/2018,month=12&#39;</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;data/olr.nc&#39;</span><span class="p">),</span> <span class="n">output</span><span class="o">=</span><span class="s1">&#39;olr_dec_ltm.nc&#39;</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;olr_dec_ltm.nc&#39;
</pre></div>
</div>
</div>
</div>
<p><strong>Example 5: 計算日氣候平均</strong> 計算<code class="docutils literal notranslate"><span class="pre">olr.nc</span></code>的日氣候平均。</p>
<p><strong>1. Command Line:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span> <span class="n">ydaymean</span> <span class="n">data</span><span class="o">/</span><span class="n">olr</span><span class="o">.</span><span class="n">nc</span> <span class="n">data</span><span class="o">/</span><span class="n">olr_dayClim</span><span class="o">.</span><span class="n">nc</span>
</pre></div>
</div>
<p><strong>2.Python:</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span><span class="o">.</span><span class="n">ydaymean</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="s1">&#39;data/olr.nc&#39;</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s1">&#39;data/olr_dayClim.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;data/olr_dayClim.nc&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="arithmetics">
<h2>算術 (Arithmetics)<a class="headerlink" href="#arithmetics" title="Link to this heading">#</a></h2>
<p>cdo的算術(以<code class="docutils literal notranslate"><span class="pre">EXPR</span></code>的operator表示)包括<code class="docutils literal notranslate"><span class="pre">=</span></code> (assignment)、加 (<code class="docutils literal notranslate"><span class="pre">x+y</span></code>)、減 (<code class="docutils literal notranslate"><span class="pre">x-y</span></code>)、乘 (<code class="docutils literal notranslate"><span class="pre">x*y</span></code>)、除 (<code class="docutils literal notranslate"><span class="pre">x/y</span></code>)、絕對值<code class="docutils literal notranslate"><span class="pre">abs(x)</span></code>、開根號<code class="docutils literal notranslate"><span class="pre">sqr(x)</span></code>、取指數<code class="docutils literal notranslate"><span class="pre">exp(x)</span></code>等。</p>
<p><strong>Example 6:</strong> NCEP MSLP資料原先單位是Pa，利用cdo將資料轉換成hPa。</p>
<p><strong>1. Command Line:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span> <span class="n">expr</span><span class="p">,</span><span class="s1">&#39;mslp=mslp/100&#39;</span> <span class="n">mslp</span><span class="mf">.2021</span><span class="o">.</span><span class="n">nc</span> <span class="n">mslp</span><span class="o">.</span><span class="n">hpa</span><span class="mf">.2021</span><span class="o">.</span><span class="n">nc</span>
</pre></div>
</div>
<p><strong>2. Python:</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span><span class="o">.</span><span class="n">expr</span><span class="p">(</span><span class="s1">&#39;mslp=mslp/100.&#39;</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;data/mslp.2021.nc&#39;</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s1">&#39;data/mslp.hap.2021.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;data/mslp.hap.2021.nc&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="interpolation">
<h2>網格內插 (Interpolation)<a class="headerlink" href="#interpolation" title="Link to this heading">#</a></h2>
<p>例如當兩組資料網格解析度不同卻需要在相同網格上比較和分析時，或是降低資料的網格解析度以節省計算空間，或是處理模式結果時，我們需要改變資料的網格解析度。cdo有很好用的網格內插工具，可以處理球諧函數的網格座標 (spherical harmonics)、高斯座標 (Gausian Field)、直角坐標系 (Longitude/Latitude)等。這三種座標系統的解析度大約如下表所示：</p>
<p><img alt="" src="images/fig11.1.png" /></p>
<section id="id1">
<h3>內插到標準網格<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">remapbil</span></code>：Bilinear interpolation，是最常使用的網格內插方法。</p>
<p><img alt="" src="images/fig11.2.png" /></p>
<p><strong>1. Command Line:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span> <span class="n">remapbil</span><span class="p">,</span><span class="n">n32</span> <span class="n">data</span><span class="o">/</span><span class="n">olr</span><span class="o">.</span><span class="n">nc</span> <span class="n">data</span><span class="o">/</span><span class="n">olr</span><span class="o">.</span><span class="n">n32</span><span class="o">.</span><span class="n">nc</span>
</pre></div>
</div>
<p><strong>2. Python:</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span><span class="o">.</span><span class="n">remapbil</span><span class="p">(</span><span class="s1">&#39;n32&#39;</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;data/olr.nc&#39;</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s1">&#39;data/olr.n32.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;data/olr.n32.nc&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="id2">
<h3>內插到任意網格<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<p>首先要對目標網格建立一個<strong>網格資訊檔</strong>。以NCEP R2的網格作為範例如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gridtype</span> <span class="o">=</span> <span class="n">lonlat</span>
<span class="n">xsize</span>    <span class="o">=</span> <span class="mi">69</span>
<span class="n">ysize</span>    <span class="o">=</span> <span class="mi">17</span>
<span class="n">xfirst</span>   <span class="o">=</span> <span class="mi">40</span>
<span class="n">xinc</span>     <span class="o">=</span> <span class="mf">2.5</span>
<span class="n">yfirst</span>   <span class="o">=</span> <span class="o">-</span><span class="mi">20</span>
<span class="n">yinc</span>     <span class="o">=</span> <span class="mf">2.5</span>
</pre></div>
</div>
<p>以上的檔案包含了網格型態、網格數、起始點等資訊。將這個網格資訊檔放入目前的資料夾中(取名為<code class="docutils literal notranslate"><span class="pre">ncep_grid</span></code>)，就可以使用它來進行網格內插了。</p>
<p><strong>Example 7:</strong> 將CMORPH資料 (解析度0.25度) 內插到NCEP R2網格。</p>
<p><strong>1. Command Line:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span> <span class="n">remapbil</span><span class="p">,</span><span class="n">ncep_grid</span> <span class="n">data</span><span class="o">/</span><span class="n">cmorph_sample</span><span class="o">.</span><span class="n">nc</span> <span class="n">data</span><span class="o">/</span><span class="n">cmorph_remap</span><span class="o">.</span><span class="n">nc</span>
</pre></div>
</div>
<p><strong>2. Python:</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span><span class="o">.</span><span class="n">remapbil</span><span class="p">(</span><span class="s1">&#39;ncep_grid&#39;</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;data/cmorph_sample.nc&#39;</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s1">&#39;data/cmorph_remap.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Error in calling operator remapbil with:
&gt;&gt;&gt; cdo -O -s -remapbil,ncep_grid data/cmorph_sample.nc data/cmorph_remap.nc&lt;&lt;&lt;
STDOUT:
STDERR:
cdo    remapbil (Abort): Open failed on ncep_grid!
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">CDOException</span><span class="g g-Whitespace">                              </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">cdo</span><span class="o">.</span><span class="n">remapbil</span><span class="p">(</span><span class="s1">&#39;ncep_grid&#39;</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;data/cmorph_sample.nc&#39;</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s1">&#39;data/cmorph_remap.nc&#39;</span><span class="p">)</span>

<span class="nn">File /data/wtsai/micromamba/p3/lib/python3.10/site-packages/cdo/cdo.py:520,</span> in <span class="ni">Cdo.__call__</span><span class="nt">(self, *args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">518</span>             <span class="k">return</span> <span class="kc">None</span>
<span class="g g-Whitespace">    </span><span class="mi">519</span>         <span class="k">else</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">520</span>             <span class="k">raise</span> <span class="n">CDOException</span><span class="p">(</span><span class="o">**</span><span class="n">retvals</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">521</span> <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">522</span>     <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>

<span class="ne">CDOException</span>: (returncode:1) 
<span class="n">cdo</span>    <span class="n">remapbil</span> <span class="p">(</span><span class="n">Abort</span><span class="p">):</span> <span class="n">Open</span> <span class="n">failed</span> <span class="n">on</span> <span class="n">ncep_grid</span><span class="err">!</span>
</pre></div>
</div>
</div>
</div>
<p>以上的範例受限於我們提供的CMORPH資料並非全球網格。如果針對全球資料，進行內插時<code class="docutils literal notranslate"><span class="pre">ncep_grid</span></code>網格資訊檔應寫為</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gridtype</span> <span class="o">=</span> <span class="n">lonlat</span>
<span class="n">xsize</span>    <span class="o">=</span> <span class="mi">144</span>
<span class="n">ysize</span>    <span class="o">=</span> <span class="mi">73</span>
<span class="n">xfirst</span>   <span class="o">=</span> <span class="mi">0</span>
<span class="n">xinc</span>     <span class="o">=</span> <span class="mf">2.5</span>
<span class="n">yfirst</span>   <span class="o">=</span> <span class="o">-</span><span class="mi">90</span>
<span class="n">yinc</span>     <span class="o">=</span> <span class="mf">2.5</span>
</pre></div>
</div>
</section>
</section>
<section id="id3">
<h2>檔案輸出格式<a class="headerlink" href="#id3" title="Link to this heading">#</a></h2>
<p>CDO預設輸出的檔案格式為netCDF檔案，如果想要更改，可以在Operator前加上option <code class="docutils literal notranslate"><span class="pre">-f</span> <span class="pre">&lt;format&gt;</span></code>。可接受的格式如下‘：</p>
<p><img alt="" src="images/fig11.3.png" /></p>
<p><strong>1. Command Line:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span> <span class="o">-</span><span class="n">f</span> <span class="n">grb2</span> <span class="n">copy</span> <span class="n">data</span><span class="o">/</span><span class="n">olr</span><span class="o">.</span><span class="n">nc</span> <span class="n">data</span><span class="o">/</span><span class="n">olr</span><span class="o">.</span><span class="n">grb2</span>
</pre></div>
</div>
<p><strong>2. Python:</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">option</span><span class="o">=</span><span class="s1">&#39;-f grb2&#39;</span><span class="p">,</span> 
         <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;data/olr.nc&#39;</span><span class="p">,</span>
         <span class="n">output</span><span class="o">=</span><span class="s1">&#39;data/olr.grib2&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;data/olr.grib2&#39;
</pre></div>
</div>
</div>
</div>
<section id="binary">
<h3>Binary二元進位檔<a class="headerlink" href="#binary" title="Link to this heading">#</a></h3>
<p>有些檔案是以二元進位 (binary) 的格式儲存的，檔案本身沒有網格資料，但通常會有附加的控制檔<code class="docutils literal notranslate"><span class="pre">.ctl</span></code>，告訴使用者要如何讀取這類檔案。二元進位檔在GrADS很常使用，利用cdo，也可以將二元進位檔轉換成netCDF格式。</p>
<p>首先控制檔格式如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>DSET infile.bin
OPTIONS sequential
UNDEF − 9 e + 3 3
XDEF 360  LINEAR −179.5 1
YDEF  180 LINEAR −89.5 1
ZDEF LINEAR 1 1
TDEF 1 LINEAR 00:00 Z15jun1989 12hr
VARS 1
param 1 99 description of the variable
ENDVARS
</pre></div>
</div>
<p><strong>1. Command Line:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span> <span class="o">-</span><span class="n">f</span> <span class="n">nc</span> <span class="n">import_binary</span> <span class="n">infile</span><span class="o">.</span><span class="n">ctl</span> <span class="n">outfile</span><span class="o">.</span><span class="n">nc</span>
</pre></div>
</div>
<p><strong>2. Python:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cdo</span><span class="o">.</span><span class="n">import_binary</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="s1">&#39;infile.ctl&#39;</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s1">&#39;outfile.nc&#39;</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="s1">&#39;-f nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="10_pandas_seaborn.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">10. <code class="docutils literal notranslate"><span class="pre">pandas</span></code> and <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>: Statistical Plots</p>
      </div>
    </a>
    <a class="right-next"
       href="12_large_ds.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">12. <code class="docutils literal notranslate"><span class="pre">dask</span></code> and Large Datasets Computations</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cdo"><code class="docutils literal notranslate"><span class="pre">cdo</span></code>基本指令</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#linux-command-line">Linux指令列 (Command Line)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python">Python程式</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#select-field">資料選擇 (Select Field)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#statistics">統計 (Statistics)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#arithmetics">算術 (Arithmetics)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interpolation">網格內插 (Interpolation)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">內插到標準網格</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">內插到任意網格</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">檔案輸出格式</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#binary">Binary二元進位檔</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Wayne Yuan-Huai Tsai, University of Oklahoma
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2021-2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <p>
Last updated: 2024-07-18
</p>
</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>